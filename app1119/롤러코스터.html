<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body{margin:0px;}
        .container{
            width: 1200px;
            height: 700px;
            background-color: antiquewhite;
        }
        .content{
            width: 1100px;
            height: 100%;
            background-image:url(../images/roller.jpg);
            background-repeat: no-repeat; /*패턴 반복 중지*/
            background-size: 1100px 100%;
            float:left;
            position: relative; /*static 에 left, top 적용가능한 위치속성, 즉 다른 태그와의 관계에서 할당받은
                                        본연의 위치*/
        }
        .aside{
            width: 100px;
            height: 100%;
            background-color: blanchedalmond;
            float:left;
            overflow:scroll;
        }
    </style>
    <script>
        let posList=new Array();//좌표를 누적할 배열 선언 
                                            //현재까지는 1차원 배열이지만, 곧 좌표를 넣을 예정이므로, 추후 2차원배열이
                                            //될 예정임...프로그램이 끝날때까지는 살아잇으면서, 좌표를 누적시켜야 하므로
                                            //전역변수로 선언해야 한다..
        let txt=``; //문자열을 누적할 변수 
        let img; //마리오를 다른 함수에서도 접근하기 위해, 전역변수로 빼놓았다
        let index=0; //전체 이차원 배열을 접근하기 위한 인덱스(1씩 누적되어야 하므로 전역변수)

        //실시간으로 유저가 일으키는 모든 이벤트 정보는 자바스크립트의 내장된 객체 중 event 객체가 처리함
        function move(){
            let x=event.clientX; //마우스의 x좌표 
            let y=event.clientY; //마우스의 y좌표 
            //console.log(`현재 마우스 좌표는 x=${x},y=${y}`);
            //우측의 aside 안에 출력하기 
            let pos=[x,y]; //일차원 배열을 생성하여 0번째-x , 1번째-y
            //pos 지역변수이므로, 이 함수내에서만 존재할 수 있으므로 닫는} 를 만나면 소멸된다.따라서 
            //전역변수인 posList에 담아놓자 
            //java.util.List는 동적 요소 추가시 add()  메서드를 사용하지만, js는 배열에 동적으로 요소를 추가할
            //수 있고 이때 사용하는 메서드가 바로 push() 이다!!
            posList.push(pos); //이차원배열에 일차원 배열을 추가하게 되는 시점!!

            txt = txt + `x=${x},y=${y}\n`;

            //좌표를 출력하는 문자열이 대체되지 않고, 누적이 되게 처리...
            document.querySelector(".aside").innerText=txt;

            //이 함수를 호출할때마다, div 요소를 동적(=runtime 실행 시)으로 생성하여 content div 화면에 부착
            let dot=document.createElement("div"); //점 하나를 시각화시킬  div
            //모든 태그는 기본이 투명이므로, 배경색을 부여하자 
            dot.style.backgroundColor="red";
            dot.style.width=4+"px";
            dot.style.height=4+"px";

            //부모인 content 를 기준으로 한 위치 속성인 absolute 를 적용 
            //이 경우, content의 꼭지점이 dot의 0, 0 좌표가 됨 
            //단, 자식요소에 static 아닌 position이 명시될 경우, 반드시 부모요소에도 position이 선언되어야 함
            dot.style.position="absolute";
            dot.style.left=`${x}px`;
            dot.style.top=`${y}px`;
            
            //생성된 dot를 부모인 content에 동적으로 추가하자 
            document.querySelector(".content").appendChild(dot);
        }

        //문서가 로드되자 마자 하고 싶은 작업이 잇다면 이 함수에서 처리하기 위해 onLoad 시점에 호출함 
        function init(){
            //프로그래밍 적으로 동적으로 생성하려면 createElement() 메서드 사용해야 함 
            img=document.createElement("img");  // <img> 작성과 동일 효과
            img.src="../images/mario.png";
            img.style.width=30+"px";
            //html 태그요소는 개발자가 특별히 postion을 명시하지 않으며 디폴트가 static 이므로, 
            //left, top이 적용되지 않으므로 왼쪽 상단을 기준으로 부착된다..
            //따라서 위치를 자유롭게 하고 싶다면 개발자는  css의 position 을 명시할 수 잇다.
            //1) absolute : 부모 요소를 기준으로 한 위치 속성 
            //2) relative : 현재 자신의 본연의 위치를 기준으로 한 위치 속성
            //현재 케릭터는 부모인 content div 를 기준으로 위치를 지정할 것이므로,  absolute 로 지정해야한다
            img.style.position="absolute";
            img.style.left=`50px`;
            img.style.top=`100px`;

            //부모 요소를 content 로 두고, 그 안에 자식으로 부착 
            document.querySelector(".content").appendChild(img);

        }

        //문서내의 content 영역안에 존재하는 마리오 이미지의 위치를 누적된 좌표를 대상으로
        //순서대로 접근해보자 
        function manual(){
            //이차원 배열인 postList에 누적되어 있는 일차원 배열인 좌표 정보를 이용하여, 
            //주인공의 left, top값을 지정하자!!
            //버튼을 누를때마다 postList의 좌표값을 1씩 증가시키며 진행하면 됨 

            //index++; //여기서 먼저 증가시켜버리면 마리오의 두번째 점부터 보여지므로... 여기서 ++하지말자
           //누를 때마다 층변수는 1씩 증가
           img.style.left=posList[index][0]+"px"; //n번째 층의 x좌표 
           img.style.top=posList[index][1]+"px";//n번째 층의 y좌표 
           index++;
        }

        function auto(){
            //자동이란, 이미 정의된 수동 기능을 사람이 아닌 , 컴퓨터에게 맡기는 것임 

            //setInterval() 개발자가 별도로 명령을 주지 않는 한, 끊임없이 지정된 함수를 호출!!(지정한 시간 간격으로)
            //주의- 만약 사용자가 이 버튼을 3번 누르면, setInterval() 동시에 3개가 진행되므로, 전역변수 1개를
            //3개의 실행부가 동시에 돌리면 0..3..6. 등의 너무 빠른 누적이 발생함..효과 떨어짐..
            setInterval("manual()", 100); // 1000 분의 1초까지 표현가능 즉, 0.001초까지 표현 가능
            
            //엉킴을 방지하기 위해 버튼 자체를 비활성화 시키자 
            //문서내의 자동 버튼을 비활성화시키자 
            document.getElementById("bt_auto").disabled=true;
        }
    </script>
</head>
<!-- 
    padding : 나의 내용과의 여백
    margin: 나와 외부 요소와의 여백
 -->
<body onLoad="init()">  
    
    <div class="container">
        <div class="content" onmousedown="move()"></div>
        <div class="aside"></div>
        <button onClick="manual()">수동</button>
        <button onClick="auto()" id="bt_auto">자동</button>
    </div>

</body>
</html>